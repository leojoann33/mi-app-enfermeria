import{j as e}from"./index-B5CSIygu.js";import{r as g,R as w,L as M,i as L}from"./vendor-Bu8_wSc8.js";import{L as S}from"./lab-BLw-2lVt.js";import{aX as y,n as k,X as I,b7 as z,R as B,bl as D}from"./icons-pd9UMiox.js";const _=["Antonio","Manuel","Jose","Francisco","David","Juan","Jose Antonio","Javier","Jose Luis","Daniel","Francisco Javier","Jesus","Carlos","Alejandro","Miguel","Jose Manuel","Rafael","Pedro","Angel","Miguel Angel","Jose Maria","Fernando","Pablo","Luis","Sergio","Jorge","Alberto","Juan Carlos","Juan Jose","Diego","Alvaro","Adrian","Juan Antonio","Enrique","Raul","Ramon","Vicente","Ivan","Ruben","Andres","Oscar","Joaquin","Santiago","Eduardo","Victor","Roberto","Jaime","Francisco Jose","Ignacio","Mario","Alfonso","Salvador","Ricardo","Marcos","Emilio","Julian","Julio","Tomas","Agustin","Guillermo"],P=["Maria","Carmen","Ana","Isabel","Dolores","Pilar","Teresa","Rosa","Josefa","Cristina","Maria Carmen","Maria Teresa","Ana Maria","Elena","Laura","Francisca","Antonia","Marta","Silvia","Montserrat","Lucia","Mercedes","Raquel","Manuela","Sara","Paula","Juana","Beatriz","Encarnacion","Nuria","Julia","Rosario","Susana","Rocio","Monica","Alba","Irene","Lidia","Celia","Patricia","Sofia","Andrea","Marina","Angela","Claudia","Natalia","Veronica","Gema","Daniela","Eva","Amparo","Concepcion","Victoria","Lorena","Ana Isabel","Maria Jose","Ines","Miriam","Esther","Nerea"],N=["Garcia","Gonzalez","Rodriguez","Fernandez","Lopez","Martinez","Sanchez","Perez","Gomez","Martin","Jimenez","Ruiz","Hernandez","Diaz","Moreno","Muñoz","Alvarez","Romero","Alonso","Gutierrez","Navarro","Torres","Dominguez","Vazquez","Ramos","Gil","Ramirez","Serrano","Blanco","Molina","Morales","Suarez","Ortega","Delgado","Castro","Ortiz","Rubio","Marin","Sanz","Nuñez","Iglesias","Medina","Garrido","Cortes","Castillo","Santos","Lozano","Guerrero","Cano","Prieto","Mendez","Cruz","Calvo","Gallego","Vidal","Leon","Marquez","Herrera","Peña","Flores","Cabrera","Campos","Vega","Fuentes","Carrasco","Diez","Caballero","Reyes","Nieto","Aguilar","Pascual","Santana","Herrero","Lorenzo","Montero","Hidalgo","Gimenez","Ibañez","Ferrer","Duran","Santiago","Benitez","Mora","Vicente","Vargas","Arias","Carmona","Crespo","Roman","Pastor","Soto","Saez","Velasco","Moya","Soler","Parra","Esteban","Bravo","Gallardo","Rojas"],G=()=>{const n=Math.random()>.5,t=n?"H":"M",s=n?_:P,m=s[Math.floor(Math.random()*s.length)],r=N[Math.floor(Math.random()*N.length)];let i=N[Math.floor(Math.random()*N.length)];for(;i===r;)i=N[Math.floor(Math.random()*N.length)];const b=Math.floor(1e5+Math.random()*9e5),c=1935+Math.floor(Math.random()*70),p=Math.floor(Math.random()*12)+1,d=Math.floor(Math.random()*28)+1;return{firstName:m,surname1:r,surname2:i,sex:t,nhc:b,dobDay:String(d).padStart(2,"0"),dobMonth:String(p).padStart(2,"0"),dobYear:String(c)}},K=({lang:n})=>{const t=n==="es",[s,m]=g.useState(1),[r]=g.useState(G()),[i,b]=g.useState({}),[c,p]=g.useState(""),d=w.useRef(null),o={hospital:t?"Hospital Universitario":"Spitalul Universitar",uni:"UNIVERSITATIS",patient:t?"PACIENTE:":"PACIENT:",surname1:t?"1er Apellido:":"Nume de familie:",surname2:t?"2.º Apellido:":"Prenume:",name:t?"Nombre:":"Inițiala:",dob:t?"Fecha nacim.:":"Data nașterii:",nhc:t?"N.º H.ª":"F. Obs.",sex:t?"Sexo:":"Sex:",searchPlaceholder:t?"Buscar muestra...":"Caută analiză...",noResults:t?"No se encontraron resultados":"Nu s-au găsit rezultate",preselected:t?"Pre-seleccionado":"Pre-selectat",continue:t?"Continuar":"Continuă",confirm:t?"Confirmar Extracción":"Confirmă Recoltarea",preparing_rack:t?"Preparando Gradilla...":"Se pregătește stativul...",preparing_mat:t?"Preparando Material (Orden CLSI)...":"Se pregătește materialul (Ordinea CLSI)...",tube_position:t?"Posición":"Poziția",of:t?"de":"din",understood:t?"Entendido":"Am înțeles",instruction_main:t?"Sigue el orden exacto para evitar la contaminación cruzada.":"Respectați ordinea exactă pentru a evita contaminarea încrucișată.",instruction_sub:t?"(Toca un tubo para saber por qué)":"(Atinge un tub pentru explicații)",new_request:t?"Nuevo Volante":"Cerere Nouă"},v=()=>{b({}),m(1),p("")};g.useEffect(()=>{const a=l=>{d.current&&!d.current.contains(l.target)&&p("")};return c&&document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[c]);const h=w.useMemo(()=>{const a=[];return Object.values(S.zones).forEach(l=>{l.groups.forEach(f=>{f.items.forEach(u=>{const O=n==="ro"&&u.labelRO?u.labelRO:u.label,j=n==="ro"&&l.titleRO?l.titleRO:l.title,E=n==="ro"&&f.titleRO?f.titleRO:f.title;a.push({...u,label:O,zone:j,group:E})})})}),a},[n]),x=a=>{b(l=>({...l,[a]:!l[a]}))},{tubes:A,filledSlots:R,hasWideTube:C}=w.useMemo(()=>{const a=Object.keys(i).filter(j=>i[j]),l=T(a),f=[],u=[];l.forEach((j,E)=>{f.push(E),u[E]=j});const O=l.some(j=>j.type==="wide");return{tubes:u,filledSlots:f,hasWideTube:O}},[i]);return g.useEffect(()=>{const a={};S.zones&&S.zones.forEach(l=>{l.groups&&l.groups.forEach(f=>{f.items.forEach(u=>{u.checked&&(a[u.id]=!0)})})}),b(a)},[]),e.jsxs("div",{className:"flex flex-col h-full bg-slate-50 relative font-body",children:[e.jsxs("div",{className:"bg-white p-3 border-b border-slate-200 shadow-sm sticky top-0 z-30",children:[e.jsxs("div",{className:"relative flex items-center mb-2",children:[e.jsx(M,{to:"/",className:"p-2 -ml-[12px] rounded-full hover:bg-slate-100 text-slate-600 z-10",children:e.jsx(y,{size:20})}),e.jsxs("div",{className:"absolute left-1/2 -translate-x-1/2 flex flex-col items-center w-full",children:[e.jsx("h1",{className:"font-heading font-black text-xs uppercase tracking-widest text-slate-400",children:o.hospital}),e.jsx("span",{className:"font-heading font-black text-lg text-[#469A7C] leading-none",children:"PETRESCU"})]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-4 py-2",children:[e.jsx("button",{onClick:()=>m(1),className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm transition-all ${s===1?"bg-[#E9B82B] text-white shadow-lg scale-110":"bg-slate-200 text-slate-500"}`,children:"1"}),e.jsx("div",{className:"w-12 h-[2px] bg-slate-200 relative",children:e.jsx("div",{className:`absolute left-0 top-0 h-full bg-[#E9B82B] transition-all duration-300 ${s>=2?"w-full":"w-0"}`})}),e.jsx("button",{onClick:()=>{Object.values(i).some(Boolean)&&m(2)},disabled:!Object.values(i).some(Boolean),className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm transition-all ${s===2?"bg-[#E9B82B] text-white shadow-lg scale-110":"bg-slate-200 text-slate-500"}`,children:"2"})]}),s===1&&e.jsx("div",{className:"mx-2 mt-2",children:e.jsxs("div",{className:"border border-slate-400 bg-white shadow-sm",children:[e.jsx("div",{className:"bg-slate-100 px-2 py-0.5 border-b border-slate-300",children:e.jsx("span",{className:"font-bold text-slate-800 text-[10px] uppercase",children:o.patient})}),e.jsxs("div",{className:"flex w-full border-b border-slate-300",children:[e.jsxs("div",{className:"flex-[3.5] border-r border-slate-300 px-2 pt-1 pb-1 relative",children:[e.jsx("span",{className:"text-[9px] font-bold text-slate-500 absolute top-1 left-2",children:o.surname1}),e.jsx("div",{className:"mt-4 font-handwriting text-slate-900 text-base leading-none pl-4 -rotate-1",children:r.surname1}),e.jsx("div",{className:"absolute bottom-1 left-2 right-2 border-b border-slate-400"})]}),e.jsxs("div",{className:"flex-[3.5] border-r border-slate-300 px-2 pt-1 pb-1 relative",children:[e.jsx("span",{className:"text-[9px] font-bold text-slate-500 absolute top-1 left-2",children:o.surname2}),e.jsx("div",{className:"mt-4 font-handwriting text-slate-900 text-base leading-none pl-4 rotate-1",children:r.surname2}),e.jsx("div",{className:"absolute bottom-1 left-2 right-2 border-b border-slate-400"})]}),e.jsxs("div",{className:"flex-[3] px-2 pt-1 pb-1 relative",children:[e.jsx("span",{className:"text-[9px] font-bold text-slate-500 absolute top-1 left-2",children:o.name}),e.jsx("div",{className:"mt-4 font-handwriting text-slate-900 text-base leading-none pl-4 -rotate-1",children:r.firstName}),e.jsx("div",{className:"absolute bottom-1 left-2 right-2 border-b border-slate-400"})]})]}),e.jsxs("div",{className:"flex w-full h-12",children:[e.jsxs("div",{className:"flex-[6] border-r border-slate-300 px-2 flex items-center gap-0.5",children:[e.jsx("span",{className:"text-[9px] font-bold text-slate-500 shrink-0",children:o.dob}),e.jsxs("div",{className:"flex border border-slate-800 h-7 bg-white/50",children:[e.jsx("div",{className:"w-8 flex items-center justify-center border-r border-slate-800 font-handwriting text-base",children:r.dobDay}),e.jsx("div",{className:"w-8 flex items-center justify-center border-r border-slate-800 font-handwriting text-base",children:r.dobMonth}),e.jsx("div",{className:"w-12 flex items-center justify-center font-handwriting text-base",children:r.dobYear})]})]}),e.jsxs("div",{className:"flex-[2.5] border-r border-slate-300 px-2 flex items-end pb-2 relative",children:[e.jsx("span",{className:"text-[9px] font-bold text-slate-500 mb-0.5 mr-2",children:o.nhc}),e.jsx("div",{className:"flex-1 border-b border-slate-400 font-mono text-base text-center tracking-widest leading-none",children:r.nhc})]}),e.jsxs("div",{className:"flex-[1] px-2 flex items-end pb-2",children:[e.jsx("span",{className:"text-[9px] font-bold text-slate-500 mb-0.5 mr-2",children:o.sex}),e.jsx("div",{className:"flex-1 border-b border-slate-400 font-handwriting text-base text-center leading-none -rotate-3",children:r.sex})]})]})]})}),s===1&&e.jsxs("div",{className:"mt-3 relative",ref:d,children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:o.searchPlaceholder,value:c,onChange:a=>p(a.target.value),className:"w-full pl-9 pr-4 py-2.5 bg-white border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 shadow-sm"}),e.jsx(k,{className:"absolute left-3 top-2.5 text-slate-400",size:16}),c&&e.jsx("button",{onClick:()=>p(""),className:"absolute right-3 top-2.5 text-slate-400 hover:text-slate-600",children:e.jsx(I,{size:16})})]}),c&&e.jsx("div",{className:"absolute top-full left-0 right-0 bg-white border border-slate-200 rounded-b-lg shadow-xl z-50 max-h-60 overflow-y-auto mt-1",children:h.filter(a=>a.label.toLowerCase().includes(c.toLowerCase())).length>0?h.filter(a=>a.label.toLowerCase().includes(c.toLowerCase())).map(a=>e.jsxs("div",{onClick:()=>x(a.id),className:"px-4 py-3 border-b border-slate-100 last:border-0 hover:bg-slate-50 cursor-pointer flex items-center justify-between group",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700 group-hover:text-indigo-700",children:a.label}),e.jsx("div",{className:`w-5 h-5 rounded border flex items-center justify-center transition-colors ${i[a.id]?"bg-indigo-600 border-indigo-600":"border-slate-300 bg-white"}`,children:i[a.id]&&e.jsx(z,{size:14,className:"text-white",strokeWidth:3})})]},a.id)):e.jsx("div",{className:"p-4 text-center text-slate-500 text-sm",children:o.noResults})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:s===1?e.jsx("div",{className:"pb-24 p-0",children:S.zones.map(a=>e.jsx("div",{className:`${a.color} p-6 border-b border-black/5 last:border-0`,children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h2",{className:`font-heading font-black text-xl uppercase tracking-wider mb-6 pb-2 border-b-2 border-black/10 ${a.headerColor}`,children:n==="ro"&&a.titleRO?a.titleRO:a.title}),e.jsx("div",{className:"space-y-8",children:a.groups.map((l,f)=>e.jsxs("div",{className:"break-inside-avoid",children:[e.jsx("h3",{className:`font-bold uppercase tracking-wider text-xs mb-3 pl-1 ${l.color}`,children:n==="ro"&&l.titleRO?l.titleRO:l.title}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:l.items.map(u=>e.jsxs("div",{onClick:()=>x(u.id),className:`
                                                                relative p-3 rounded-lg border cursor-pointer transition-all flex items-start gap-3
                                                                ${i[u.id]?"bg-indigo-50 border-indigo-500 shadow-sm ring-1 ring-indigo-500":"bg-white/80 border-slate-200 hover:border-slate-300 hover:shadow-sm"}
                                                            `,children:[e.jsx("div",{className:`w-5 h-5 rounded border flex items-center justify-center shrink-0 mt-0.5 transition-colors ${i[u.id]?"bg-indigo-600 border-indigo-600":"border-slate-300 bg-white"}`,children:i[u.id]&&e.jsx(z,{size:14,className:"text-white",strokeWidth:4})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"block leading-tight font-semibold text-slate-700 text-sm",children:n==="ro"&&u.labelRO?u.labelRO:u.label}),u.checked&&e.jsx("span",{className:"text-[10px] uppercase font-bold text-indigo-400 mt-1 block tracking-wider",children:o.preselected})]})]},u.id))})]},f))})]})},a.id))}):e.jsx("div",{className:"flex flex-col items-center justify-center h-full animate-in fade-in duration-500 relative",children:e.jsx(F,{selections:i,onReset:v,textMap:o,lang:n})})}),s===1&&e.jsx("div",{className:"absolute bottom-4 left-4 right-4 z-40",children:e.jsxs("button",{onClick:()=>m(2),disabled:!Object.values(i).some(Boolean),className:"w-full py-4 bg-slate-900 text-white rounded-xl font-bold shadow-xl disabled:opacity-50 disabled:shadow-none transition-all flex items-center justify-center gap-2",children:[o.continue," ",e.jsx(y,{className:"rotate-180",size:18})]})})]})},H={hemocultivos:{id:"hemo",order:1,color:"bg-yellow-100",cap:"bg-blue-500",label:"HEMOCULT",labelRO:"HEMOCULT",type:"bottle",height:"h-28",width:"w-10",ml:"10ml",inv:"8-10 inversiones",invRO:"8-10 inversări",desc:"Hemocultivos",descRO:"Hemoculturi",desc_long:"Se extraen PRIMERO para asegurar la esterilidad absoluta. Si se llenaran después de otros tubos, la aguja podría contaminarse y causar un falso positivo de bacterias en sangre."},blue:{id:"blue",order:2,color:"bg-sky-50",cap:"bg-[#0EA5E9]",label:"CITRATO",labelRO:"CITRAT",type:"tube",height:"h-[7.5rem]",width:"w-4",ml:"2.7ml",inv:"3-4 inversiones",invRO:"3-4 inversări",desc:"Coagulación",descRO:"Coagulare",desc_long:"El Citrato debe ir ANTES de los tubos con activadores de coágulo (Rojo/Oro) o Heparina, ya que estos aditivos alterarían irreversiblemente las pruebas de coagulación."},red:{id:"red",order:3,color:"bg-red-50",cap:"bg-[#EF4444]",label:"SUERO",labelRO:"SER",type:"tube",height:"h-32",width:"w-4",ml:"6ml",inv:"5 inversiones",invRO:"5 inversări",desc:"Suero (Serología)",descRO:"Ser (Serologie)",desc_long:"Tubo para suero sin gel. Se coloca antes de heparina/EDTA para evitar que los anticoagulantes de esos tubos contaminen la muestra de suero limpio."},gold:{id:"gold",order:4,color:"bg-amber-50",cap:"bg-[#EAB308]",label:"GEL",labelRO:"GEL",type:"tube",height:"h-24",width:"w-5",ml:"3.5ml",inv:"5 inversiones",invRO:"5 inversări",desc:"Suero (Gel)",descRO:"Ser (Gel)",desc_long:"Contiene gel separador y activador de coágulo. Va en el bloque de 'Suero', protegido de contaminación por anticoagulantes fuertes como EDTA o Fluoruro."},green:{id:"green",order:5,color:"bg-emerald-50",cap:"bg-[#10B981]",label:"HEPARINA",labelRO:"HEPARINĂ",type:"tube",height:"h-32",width:"w-4",ml:"4ml",inv:"8-10 inversiones",invRO:"8-10 inversări",desc:"Heparina (Urg.)",descRO:"Heparină (Urg.)",desc_long:"Heparina de Litio. Si se extrajera antes del Azul (Citrato) o Rojo (Suero), la heparina podría falsear las pruebas de coagulación o anticuerpos."},purple:{id:"purple",order:6,color:"bg-purple-50",cap:"bg-[#A855F7]",label:"EDTA",labelRO:"EDTA",type:"tube",height:"h-20",width:"w-4",ml:"2ml",inv:"8-10 inversiones",invRO:"8-10 inversări",desc:"Hemograma",descRO:"Hemoleucogramă",desc_long:"¡CRÍTICO! El EDTA es rico en Potasio (K⁺). Debe ir DESPUÉS de los tubos de bioquímica (Rojo/Verde) para no provocar una falsa hiperpotasemia (potasio falsamente alto)."},pink:{id:"pink",order:7,color:"bg-pink-50",cap:"bg-[#EC4899]",label:"B. SANGRE",labelRO:"B. SÂNGE",type:"tube",height:"h-32",width:"w-4",ml:"6ml",inv:"8-10 inversiones",invRO:"8-10 inversări",desc:"Banco Sangre",descRO:"Bancă de Sânge",desc_long:"Similar al Lila (tiene EDTA). Se usa para cruzar sangre. Su posición tardía evita contaminar los tubos previos con EDTA."},grey:{id:"grey",order:8,color:"bg-slate-100",cap:"bg-[#64748B]",label:"GLUCOSA",labelRO:"GLUCOZĂ",type:"tube",height:"h-[7.5rem]",width:"w-4",ml:"4ml",inv:"8-10 inversiones",invRO:"8-10 inversări",desc:"Glucosa",descRO:"Glucoză",desc_long:"Contiene Fluoruro/Oxalato. Estos aditivos son muy potentes y destruirían células o alterarían enzimas, por eso va al FINAL de la extracción."},black:{id:"black",order:9,color:"bg-stone-50",cap:"bg-black",label:"VSG",labelRO:"VSH",type:"tube",height:"h-32",width:"w-3",ml:"1.6ml",inv:"8-10 inversiones",invRO:"8-10 inversări",desc:"VSG",descRO:"VSH",desc_long:"Tubo específico para Velocidad de Sedimentación. Por protocolo suele ir al final junto con otros tubos especiales."}},T=n=>{const t=new Set;return Object.keys(n).forEach(s=>{n[s]&&(s==="hemocultivos"&&t.add("hemocultivos"),["inr","coagulacion_basica","dimero_d","fibrinogeno","antitrombina","proteina_c","proteina_s"].includes(s)&&t.add("blue"),["hemograma","hba1c","banco_sangre","reticulocitos","acth"].includes(s)&&t.add("purple"),["grupo_rh","pruebas_cruzadas"].includes(s)&&t.add("pink"),["gasometria_venosa","troponina","cariotipo","amonio"].includes(s)&&t.add("green"),["lactato","glucosa_basal","curva_glucosa"].includes(s)&&t.add("grey"),s==="vsg"&&t.add("black"),["hemocultivos","hemograma","inr","coagulacion_basica","gasometria_venosa","lactato","vsg","grupo_rh"].includes(s)||(["digoxina","litio","fenitoina"].includes(s)?t.add("red"):t.add("gold")))}),Array.from(t).map(s=>H[s]).filter(Boolean).sort((s,m)=>s.order-m.order)},V=(n,t,s,m="es")=>{const r=m==="es",i=s.length,b=t===0,c=b?null:s[t-1],p=c?r?c.desc:c.descRO||c.desc:"";let d=r?`Este tubo ocupa la posición ${t+1} de ${i} en tu extracción.`:`Acest tub ocupă poziția ${t+1} din ${i} în recoltarea ta.`,o="";switch(n.id){case"hemo":o=r?"Los hemocultivos tienen PRIORIDAD ABSOLUTA. Deben llenarse antes que cualquier otro para garantizar la esterilidad de la muestra y evitar falsos positivos bacterianos.":"Hemoculturile au PRIORITATE ABSOLUTĂ. Trebuie umplute primele pentru a garanta sterilitatea probei și a evita rezultatele fals pozitive bacteriene.";break;case"blue":b?o=r?"Al no haber hemocultivos, iniciamos con Citrato. Es vital que sea el primero ("+(s.length>1?"o justo después de cultivos":"único")+") para evitar que la aguja arrastre activadores de coágulo de otros tubos, lo que alteraría los tiempos de coagulación.":"În lipsa hemoculturilor, începem cu Citrat. Este vital să fie primul ("+(s.length>1?"sau imediat după culturi":"unicul")+") pentru a evita contaminarea cu activatori de coagulare din alte tuburi.":o=r?`Va inmediatamente después de ${p} para proteger las pruebas de coagulación. Si se extrajera después de un tubo con aditivos potentes, se invalidaría la muestra.`:`Vine imediat după ${p} pentru a proteja testele de coagulare.`;break;case"red":case"gold":b?o=r?"Iniciamos con Suero (Bioquímica) para obtener una muestra limpia sin interferencias de anticoagulantes.":"Începem cu Ser (Biochimie) pentru a obține o probă curată, fără interferențe de anticoagulanți.":c?.id==="blue"?o=r?"Se extrae después del Citrato (Azul) para respetar el orden estándar. El suero debe obtenerse antes de usar tubos con anticoagulantes fuertes (como EDTA o Heparina) que alterarían la química sanguínea.":"Se recoltează după Citrat (Albastru) pentru a respecta ordinea standard. Serul trebuie obținut înainte de a folosi tuburi cu anticoagulanți puternici (ca EDTA sau Heparina).":o=r?"Se coloca en esta posición intermedia, SIEMPRE antes de los tubos con Heparina o EDTA, para evitar contaminación química de la muestra de suero.":"Se plasează în această poziție intermediară, ÎNTOTDEAUNA înainte de tuburile cu Heparină sau EDTA, pentru a evita contaminarea chimică.";break;case"green":o=r?"La Heparina suele ir después de los tubos de suero (para no afectar su coagulación) y ANTES del EDTA (Lila), ya que el EDTA destruiría ciertas enzimas que se miden en plasma heparinizado.":"Heparina vine de obicei după tuburile de ser și ÎNAINTE de EDTA (Mov), deoarece EDTA ar distruge anumite enzime măsurate în plasma heparinizată.";break;case"purple":case"pink":o=r?"¡ATENCIÓN! El EDTA es rico en Potasio (K+). Debe ir CASI AL FINAL, obligatoriamente después de los tubos de Bioquímica (Rojo/Oro/Verde). Si lo extrayeras antes, el potasio se dispararía falsamente en los análisis de los tubos anteriores.":"ATENȚIE! EDTA este bogat în Potasiu (K+). Trebuie să fie SPRE FINAL, obligatoriu după Biochimie (Roșu/Aur/Verde). Dacă îl recoltați înainte, potasiul va ieși fals mărit în tuburile anterioare.";break;case"grey":o=r?"Los aditivos de este tubo (Fluoruro/Oxalato) son muy agresivos para la conservación de glucosa. Se dejan para el final para no estropear la integridad celular de ninguna otra muestra previa.":"Aditivii acestui tub (Fluorură/Oxalat) sunt agresivi. Se lasă la final pentru a nu altera integritatea celulară a probelor anterioare.";break;case"black":o=r?"Por protocolo estándar de sedimentación, la VSG se extrae al final de la secuencia para asegurar que el resto de muestras prioritarias (Coagulación, Bioquímica, Hemograma) ya están seguras.":"Conform protocolului standard, VSH se recoltează la final pentru a asigura prioritatea celorlalte probe (Coagulare, Biochimie, Hemoleucogramă).";break;default:o=r?"Sigue el orden estándar CLSI para minimizar errores preanalíticos.":"Urmați ordinea standard CLSI pentru a minimiza erorile preanalitice."}return{intro:d,reason:o}},U=n=>({HEMOCULT:"HEMOCULTIVO",CITRATO:"COAGULACIÓN",CITRAT:"COAGULARE",SUERO:"BIO. ROJO",SER:"BIO. ROȘU",GEL:"BIO. AMARILLO","BIO. GALBEN":"BIO. GALBEN",HEPARINA:"BIO. VERDE",HEPARINĂ:"BIO. VERDE",EDTA:"HEMOGRAMA",HEMOLEUCOGRAMĂ:"HEMOLEUCOGRAMĂ","B. SANGRE":"BANCO SANGRE","B. SÂNGE":"BANCĂ SÂNGE",GLUCOSA:"GLUCOSA",GLUCOZĂ:"GLUCOZĂ",VSG:"VELOCIDAD",VSH:"VITEZĂ"})[n]||n,q=({tube:n,isAnimated:t,onClick:s,scale:m=1,variant:r="simple",patient:i=null,lang:b="es"})=>{const[c,p]=g.useState(!1),d=b==="es";g.useEffect(()=>{if(t){const h=setTimeout(()=>p(!0),600);return()=>clearTimeout(h)}else p(!0)},[t]);const o=()=>e.jsx("div",{className:"flex items-center justify-between w-full h-full px-1 bg-white overflow-hidden",children:Array.from({length:40}).map((h,x)=>e.jsx("div",{className:`h-full bg-black ${Math.random()>.5?"w-px":"w-0.5"}`,style:{opacity:Math.random()>.2?1:0}},x))}),v=b==="ro"&&n.labelRO?n.labelRO:n.label;return r==="detailed"&&i?e.jsxs("div",{className:"relative bg-white border border-slate-300 shadow-md flex flex-col p-3 select-none group hover:scale-[1.02] transition-transform duration-300",style:{width:"240px",height:"160px",transform:`scale(${m})`,transformOrigin:"center center"},onClick:s,children:[e.jsxs("div",{className:"flex justify-between items-start border-b-2 border-slate-900 pb-1 mb-2",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] font-bold text-slate-900 leading-none",children:d?"Hospital Universitario":"Spitalul Universitar"}),e.jsx("span",{className:"text-[12px] font-black text-slate-900 leading-none tracking-tight",children:"PETRESCU"})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:"text-[10px] font-mono font-bold text-slate-600",children:"10-086826"}),e.jsx("span",{className:"text-[9px] text-slate-400",children:"05/01/2026"})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-[9px] font-bold text-slate-500 uppercase",children:d?"Muestra":"Probă"}),e.jsx("div",{className:"text-[14px] font-black text-slate-900 leading-none truncate",children:U(v)}),e.jsx("div",{className:"text-[10px] text-slate-400 font-mono mt-0.5",children:"10.086826"})]}),e.jsx("div",{className:"h-10 w-24",children:e.jsx(o,{})})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-2 mt-auto",children:[e.jsxs("div",{className:"text-[12px] font-bold text-slate-900 truncate mb-1",children:[i.surname1," ",i.surname2,", ",i.name]}),e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{className:"text-[10px] text-slate-600",children:[e.jsx("span",{className:"font-bold",children:d?"NHC:":"F.Obs:"})," ",i.nhc]}),e.jsx("div",{className:"h-5 w-20 opacity-80",children:e.jsx(o,{})})]})]})]}),s&&e.jsx("div",{className:"absolute inset-0 bg-transparent group-hover:bg-black/5 transition-colors pointer-events-none"})]}):e.jsxs("div",{className:`relative flex flex-col items-center justify-end group transition-transform ${t?"animate-in fade-in slide-in-from-top-10 duration-700":""}`,children:[e.jsx("button",{onClick:h=>{h.stopPropagation(),s&&s()},className:"absolute inset-0 z-[100] w-full h-full cursor-pointer bg-transparent border-none outline-none","aria-label":`Ver detalles de ${n.desc}`}),e.jsxs("div",{className:`relative ${n.width} ${n.height} rounded-b-full shadow-[inset_-4px_-4px_6px_rgba(0,0,0,0.2)] border border-slate-300 overflow-hidden bg-white/40 backdrop-blur-sm z-10 pointer-events-none transition-transform duration-500`,style:{boxShadow:"inset -2px -2px 5px rgba(0,0,0,0.1), 2px 2px 5px rgba(0,0,0,0.1)",transform:`scale(${m})`,transformOrigin:"bottom center"},children:[e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-[#8a0303] transition-all duration-[1500ms] ease-out z-10",style:{height:c?"60%":"0%"},children:e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-white/20"})}),e.jsx("div",{className:`absolute top-0 left-0 right-0 h-5 ${n.cap} shadow-sm z-20 border-b border-black/20 overflow-hidden`,children:e.jsx("div",{className:"w-full h-full opacity-30 bg-[repeating-linear-gradient(90deg,transparent,transparent_2px,#000_2px,#000_3px)]"})}),r==="simple"&&e.jsx("div",{className:"absolute top-6 left-[1px] right-[1px] bottom-2 flex flex-col items-center pt-2 z-20",children:e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("span",{className:`text-[9px] font-bold uppercase tracking-tighter transform -rotate-90 whitespace-nowrap scale-y-110 transition-colors duration-1000 ${c?"text-white/90 drop-shadow-md":"text-slate-700"}`,children:v})})}),e.jsx("div",{className:"absolute top-[40%] left-0 right-0 h-[1.5px] bg-slate-900 z-30 w-full opacity-80 pointer-events-none"}),e.jsx("div",{className:"absolute top-[40%] right-0 w-0 h-0 border-t-[4px] border-t-transparent border-r-[4px] border-r-slate-900 border-b-[4px] border-b-transparent -translate-y-1/2 pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 h-full w-1/2 bg-gradient-to-r from-white/60 to-transparent z-40 pointer-events-none"}),s&&e.jsx("div",{className:"absolute inset-0 bg-white/0 group-hover:bg-white/10 transition-colors z-50"}),s&&e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity z-50 drop-shadow-md pointer-events-none",children:e.jsx("span",{className:"text-2xl filter drop-shadow-sm",children:"ℹ️"})})]})]})},F=({selections:n,onReset:t,textMap:s,lang:m="es"})=>{const r=w.useMemo(()=>T(n),[n]),[i,b]=g.useState("waiting"),[c,p]=g.useState([]),[d,o]=g.useState(null),v=r.length;let h=1,x=9;v<=1?(h=1.5,x=3):v<=3?(h=1.25,x=5):v<=5?(h=1.15,x=7):(h=1,x=v+2,x>9&&(x=9)),x<v&&(x=v);const A=r.some(a=>a.id==="hemo"),R=w.useMemo(()=>{const a=[];for(let l=0;l<x;l++)A&&l===0?a.push({type:"wide",width:"w-11",hole:"w-10",tube:r[l]}):a.push({type:"std",width:"w-7",hole:"w-6",tube:r[l]});return a},[x,A,r]),C=(a,l)=>{const{intro:f,reason:u}=V(a,l,r,m);o({...a,explanationIntro:f,explanationReason:u,realIndex:l+1})};return g.useEffect(()=>{let a;return i==="waiting"&&(a=setTimeout(()=>{b("extracting")},2e3)),()=>clearTimeout(a)},[i]),g.useEffect(()=>{if(i==="extracting")if(c.length<r.length&&c.length<R.length){const a=setTimeout(()=>{p(l=>[...l,l.length])},1500);return()=>clearTimeout(a)}else(c.length>0||r.length===0)&&b("finished")},[i,c.length,r.length,R.length]),e.jsxs("div",{className:"relative h-full w-full flex flex-col overflow-hidden bg-white",children:[d&&L.createPortal(e.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm animate-in fade-in duration-200",onClick:()=>o(null),children:e.jsxs("div",{className:"bg-white w-full max-w-xs rounded-3xl shadow-2xl overflow-hidden animate-in zoom-in-95 slide-in-from-bottom-10 duration-300 ring-1 ring-slate-900/5",onClick:a=>a.stopPropagation(),children:[e.jsx("div",{className:`h-4 w-full ${d.cap}`}),e.jsxs("div",{className:"p-6 flex flex-col items-center text-center",children:[e.jsx("div",{className:`w-14 h-14 rounded-full ${d.color} flex items-center justify-center mb-3 shadow-inner text-2xl border-4 border-white`,children:"ℹ️"}),e.jsx("h3",{className:"text-xl font-black text-slate-800 mb-0 leading-tight",children:m==="ro"&&d.descRO?d.descRO:d.desc}),e.jsx("div",{className:"text-xs font-bold text-slate-400 mb-4 uppercase tracking-wider",children:m==="ro"&&d.labelRO?d.labelRO:d.label}),e.jsxs("div",{className:"inline-block px-4 py-1.5 bg-slate-900 text-white rounded-full text-sm font-bold shadow-md mb-2",children:[s.tube_position," ",d.realIndex," ",s.of," ",r.length]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-5",children:[e.jsx(B,{className:"w-4 h-4 text-slate-500"}),e.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide",children:m==="ro"&&d.invRO?d.invRO:d.inv})]}),e.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 w-full text-left mb-4 border border-slate-100",children:[e.jsx("p",{className:"text-xs text-slate-500 mb-2 font-semibold",children:d.explanationIntro}),e.jsx("p",{className:"text-sm text-slate-700 leading-snug font-medium",children:d.explanationReason})]}),e.jsx("button",{onClick:()=>o(null),className:"w-full py-3.5 bg-slate-900 text-white rounded-xl font-bold active:scale-95 transition-transform shadow-lg",children:s.understood})]})]})}),document.body),e.jsxs("div",{className:"flex-1 w-full overflow-y-auto pb-0 pt-0 flex flex-col items-center justify-center [&::-webkit-scrollbar]:hidden",children:[e.jsxs("div",{className:"absolute top-8 left-0 right-0 text-center z-10 px-4 pointer-events-none",children:[i==="waiting"&&e.jsx("h2",{className:"text-xl font-bold text-slate-600 animate-pulse",children:s.preparing_rack}),i==="extracting"&&e.jsx("h2",{className:"text-xl font-bold text-[#E9B82B]",children:s.preparing_mat})]}),e.jsx("div",{className:"relative mb-20 scale-125 translate-y-24",children:e.jsx("div",{className:"relative bg-orange-100 w-[340px] h-16 rounded-lg border-b-8 border-orange-200 shadow-xl flex items-center justify-evenly px-2 z-20",children:R.map((a,l)=>e.jsxs("div",{className:"relative group w-8 h-8",children:[e.jsx("div",{className:"absolute top-1 left-1/2 -translate-x-1/2 w-6 h-6 bg-orange-300/50 rounded-full shadow-inner border border-orange-300/30"}),a.tube&&c.includes(l)&&e.jsxs("div",{className:"absolute -bottom-2 left-1/2 -translate-x-1/2 z-30 cursor-pointer transition-transform active:scale-95",children:[e.jsx(q,{tube:a.tube,isAnimated:!0,scale:h,onClick:()=>C(r[l],l),lang:m}),e.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 bg-white text-slate-900 border border-slate-900 text-xs font-bold px-1.5 py-0.5 rounded shadow-lg animate-in zoom-in slide-in-from-bottom-2 pointer-events-none z-50 transition-transform duration-500",style:{transform:`translate(-50%, -${(h-1)*128}px)`},children:l+1})]})]},l))})}),e.jsx("div",{className:"text-center z-10 px-4 mt-8",children:e.jsxs("p",{className:"text-xs font-medium text-slate-600 max-w-md mx-auto leading-tight",children:[s.instruction_main,e.jsx("span",{className:"block text-[10px] font-normal text-slate-500 mt-2",children:s.instruction_sub})]})})]}),i==="finished"&&e.jsx("div",{className:"absolute bottom-0 left-4 right-4 z-40 animate-in fade-in slide-in-from-bottom-4 duration-700 pb-4",children:e.jsxs("button",{onClick:t,className:"w-full py-4 bg-slate-900 text-white rounded-xl font-bold shadow-xl transition-all flex items-center justify-center gap-2 active:scale-95 hover:bg-slate-800",children:[s.new_request," ",e.jsx(D,{size:20})]})})]})};export{K as LabRequestViewer};
